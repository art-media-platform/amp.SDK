syntax = "proto3";
package std;

option csharp_namespace = "art.media.platform.std";
//option go_package = "github.com/art-media-platform/amp.SDK/amp/std";

import "amp/amp.core.proto";

enum TRS_Flags {
    TRS_Flags_None      = 0;
    TRS_Flags_AutoScale = 1;  // Dynamically adjust scale based on observer position.
}


// TRS (Translate Rotate Scale) IEEE 1207
// General purpose placement time, space, orientation, and/or geo-position.
message TRS {

    // Uniform spatial scale; if 0, scale is implicitly 1.0
    double              Sx = 1;

    // Special TRS behavior
    TRS_Flags           Flags = 2;

    // Spatial position
    double              Px = 3;
    double              Py = 4;
    double              Pz = 5;

    // Spatial rotation; if all values 0, Quaternion is unit identity
    double              Qx = 10;
    double              Qy = 11;
    double              Qz = 12;
    double              Qw = 13;

    // If non-zero and a globe surface is defined, this TRS is applied from the spherical position, normal, and scale associated with the given S2 tile cell.
    fixed64             TileS2 = 16;
}

message Matrix4x4 {

    // 16 doubles in row-major order
    double M00 = 1;
    double M01 = 2;
    double M02 = 3;
    double M03 = 4;

    double M10 = 5;
    double M11 = 6;
    double M12 = 7;
    double M13 = 8;

    double M20 = 9;
    double M21 = 10;
    double M22 = 11;
    double M23 = 12;

    double M30 = 13;
    double M31 = 14;
    double M32 = 15;
    double M33 = 16;

}

// General purpose Camera state
message CameraState {
    TRS    Placement = 1;
    float  Pitch     = 2; // degrees
    float  Yaw       = 3; // degrees
    float  Distance  = 5; // optional distance to anchor
    float  Altitude  = 6; // optional altitude above the surface
    float  Mass      = 9; // optional mass (inertia) of camera body


    float  NearPlane = 10; // optional near plane distance
    float  FarPlane  = 11; // optional far plane distance
    float  Fov       = 13; // field of view in degrees; 0 denotes orthographic camera
    int32  PixelsX   = 16; // viewport width in pixels
    int32  PixelsY   = 17; // viewport height in pixels

    string Mode      = 20; // optional camera mode description
}

message CameraOptions {
    float  MoveSpeed   = 1; // movement speed multiplier
    string Mode        = 2; // e.g. "orbit", "first-person", "flight", etc.
    string ModeTags    = 3; // e.g. "hide-altitude.present-fullscreen"
    int32  ShowUnits   = 4; // level of detail
}


// FileInfo a general-purpose file system meta info block.
message FileInfo {
    string Mode        = 1; // unix file mode label
    bool   IsDir       = 2; // true if item is a directory

    string DirName     = 4; // prepended to FileName forms full path
    string ItemName    = 5; // file/dir item name
    int32  ExtLen      = 6; // length of the file extension (0 if none)
    string ContentType = 8; // MIME type of the file (e.g. "image/png", "text/html", etc.);

    int64  CreatedAt   = 10; // UTC << 16
    int64  ModifiedAt  = 11; // UTC << 16
    int64  ByteSize    = 14; // data fork byte length
}


// Multi-purpose, future-proof text element or label.
message TextItem {
    string   Body  = 2; // atomic plain-text body
    amp.Tags Tags  = 4; // free use attachments or metadata
}

// ValueKind specfies the primary type of a JsonValue.
enum ValueKind {
    ValueKind_Null   = 0;
    ValueKind_False  = 1;
    ValueKind_True   = 2;
    ValueKind_Number = 3;
    ValueKind_String = 4;
}

// JsonValue is a general-purpose JSON value container.
// Though multiple fields can be set (e.g. a Number also encoded as a string,
//    the Kind field is which field is considered the primary source of truth.
message JsonValue {
    ValueKind          Kind   = 1;
    string             String = 2;
    double             Number = 3;
    repeated JsonValue Array  = 4;
}

// Generic report summary
message Report {
    TextItem Title   = 1;
    TextItem Caption = 2;

    repeated TextItem Errors   = 3;
    repeated TextItem Warnings = 4;
    repeated TextItem Messages = 5;
    repeated TextItem Debug    = 15;
}

message Labels {
    string   Title     = 1;
    string   Caption   = 2;
    string   Help      = 3;
    string   About     = 4;
}

// General purpose lightweight set of geo tiles in the shape of a rectangle - composed rectangle given a center and width/height.
// The units are typically mid H3 resolution with rectangular dimensions in units of font glyph size.
message Rect {

    PointFormat Format = 1; // specifies the type and format of Coords
    fixed64     Anchor = 2; // S2 or H3 tile index; also implies visual
    fixed64     R      = 3; // mm altitude from globe center or UTC64

    int32       Width  = 8; // mm
    int32       Height = 9; // mm

    int32       I = 10; // center offset
    int32       J = 11; // center offset
    int32       K = 12; // center offset
}




// General purpose polygonal path of geo tiles.
message GeoPath {

    enum RenderType {
        Point = 0;
        Path  = 1;
        Ring  = 2;
    }

    RenderType Type      = 1;
    float      ExtrudeLo = 4;  // If non-zero, extrude the path to this height
    float      ExtrudeHi = 5;  // If non-zero, extrude the path to this height

    PointFormat      Format = 14; // specifies the type and format of Coords
    repeated fixed64 Points = 15; // tile indices interleaved with associated UTC64 or Rmm based on Format.

}


enum PointFormat {
    PointFormat_S2  = 0; // (S2)      (1) uint64: lat,lng, (res)
    PointFormat_H3  = 1; // (H3)      (1) uint64: lat,lng, (res)
    PointFormat_S2T = 2; // (S2, T)   (2) uint64: lat,lng, (res), UTC64
    PointFormat_H3T = 3; // (H3, T)   (2) uint64: lat,lng, (res), UTC64
}


// MediaItem wraps a media track, feature, featurette, collection, album, or playlist.
message MediaItem {
    MediaFlags Flags      = 1; // describes this item
    amp.Tag    Tag        = 3; // free use
    double     StartAt    = 5; // starts playback at the given seconds offset
    double     Seconds    = 6; // playback duration in seconds

    float      Popularity = 16; // 0.0 to 1.0
    float      Ordering   = 17; // items are sorted by this value

    // string              CommonName = 1;
    // string              DebugLabel = 2;
    // bool                RequiresSubscription = 10;
    // bool                RequiresInternet     = 11;
}


enum MediaFlags {
    MediaFlags_None                = 0;

    MediaFlags_IsLive              = 0x0001;
    MediaFlags_IsSeekable          = 0x0002;
    MediaFlags_IsUnending          = 0x0004;
    MediaFlags_NewChapter          = 0x0008;
    MediaFlags_NewTrack            = 0x0010;

    MediaFlags_HasAudio            = 0x0100;
    MediaFlags_HasVideo            = 0x0200;
    MediaFlags_HasSpeech           = 0x0400;
    MediaFlags_NeedsNetwork        = 0x0800;

    // When set, the user is more likely to skipping short intervals than switch media items.
    MediaFlags_SkipIsLikely        = 0x01000000;

}


message VisPreset {
    std.TextItem    CommonName = 1; // aka screen name
    std.TextItem    FamilyName = 2; // aka GroupName
    std.TextItem    Credits    = 3;
    string          AssetURI   = 6;
    repeated string AssetArgs  = 7; // args passed to vis

    //repeated string Tags       = 10; // convention classification tags within amp
}
